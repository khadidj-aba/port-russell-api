<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Tableau de bord - Port Russell</title>
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>

  <!-- En-tête -->
  <header class="dashboard-header">
    <div class="header-left">
      <img src="/assets/images/logo-port.png" alt="Logo du port" class="logo" />
      <h1>Tableau de bord</h1>
    </div>
    <div class="header-right">
      <p>Bonjour <%= user.username %> (<%= user.email %>)</p>
      <p>Date du jour : <%= new Date().toLocaleDateString('fr-FR') %></p>
    </div>
  </header>

  <hr class="separateur" />

  <!-- Navigation -->
  <nav class="nav-menu">
    <ul>
      <li><a href="/catways">Catways</a></li>
      <li><a href="/reservations">Réservations</a></li>
      <li><a href="/users">Utilisateurs</a></li>
      <li><a href="/docs">Documentation API</a></li>
      <li><a href="/logout">Déconnexion</a></li>
    </ul>
  </nav>

  <!-- Statistiques globales -->
  <section class="stats-section">
    <h2>Statistiques générales</h2>
    <ul class="stats-list">
      <li>🛥️ Catways disponibles : <strong><%= catwayCount %></strong></li>
      <li>📅 Réservations totales : <strong><%= reservationCount %></strong></li>
      <li>👥 Utilisateurs inscrits : <strong><%= userCount %></strong></li>
    </ul>
  </section>

  <!-- Contenu -->
 <section class="active-reservations">
  <h2>Vos réservations en cours</h2>

  <% if (activeReservations.length === 0) { %>
    <p>Vous n'avez aucune réservation active.</p>
  <% } else { %>
    <table>
      <thead>
        <tr>
          <th>Catway</th>
          <th>Bateau</th>
          <th>Début</th>
          <th>Fin</th>
        </tr>
      </thead>
      <tbody>
        <% activeReservations.forEach(res => { %>
          <tr>
            <td><%= res.catway && res.catway.number ? res.catway.number : "?" %></td>
            <td><%= res.boatName %></td>
            <td><%= res.startDate.toLocaleDateString('fr-FR') %></td>
            <td><%= res.endDate.toLocaleDateString('fr-FR') %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  <% } %>
</section>


</body>
</html>

